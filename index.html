<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kenayah ðŸ’–</title>
  <meta name="theme-color" content="#ff4d8d" />
  <style>
    :root{
      --pink:#ff4d8d; --pink2:#ff7bb3; --bg:#0b0b10;
      --glass: rgba(255,255,255,.12); --glass2: rgba(255,255,255,.18);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 24px; --text: rgba(255,255,255,.92); --muted: rgba(255,255,255,.75);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:var(--bg);overflow:hidden}
    .bg{position:fixed;inset:0;background:url('background.jpg') center/cover no-repeat;transform:scale(1.05);filter:saturate(1.1) contrast(1.05) brightness(.78)}
    .bg:after{content:"";position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 35%, rgba(255,77,141,.35), rgba(0,0,0,.15) 60%, rgba(0,0,0,.65) 100%),linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.65));backdrop-filter:blur(6px)}
    .wrap{position:relative;height:100%;display:flex;align-items:center;justify-content:center;padding:18px}
    .card{width:min(760px,92vw);border-radius:26px;background:linear-gradient(135deg, rgba(255,255,255,.16), rgba(255,255,255,.06));border:1px solid rgba(255,255,255,.18);box-shadow:var(--shadow);backdrop-filter:blur(14px);overflow:hidden;position:relative;animation:pop .6s cubic-bezier(.2,.9,.2,1) both}
    .card:before{content:"";position:absolute;inset:-2px;background:radial-gradient(40% 40% at 30% 20%, rgba(255,77,141,.35), transparent 60%),radial-gradient(40% 40% at 80% 30%, rgba(255,123,179,.28), transparent 60%),radial-gradient(50% 50% at 50% 120%, rgba(255,255,255,.10), transparent 55%);pointer-events:none}
    @keyframes pop{from{transform:translateY(18px) scale(.98);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}
    .top{display:flex;gap:18px;padding:26px 26px 10px;align-items:center}
    .avatar{width:86px;height:86px;border-radius:22px;background:url('background.jpg') center/cover;border:1px solid rgba(255,255,255,.22);box-shadow:0 14px 40px rgba(0,0,0,.35);position:relative;overflow:hidden;transform:rotate(-2deg)}
    .avatar:after{content:"";position:absolute;inset:0;background:radial-gradient(60% 60% at 30% 20%, rgba(255,255,255,.18), transparent 55%),linear-gradient(180deg, transparent, rgba(0,0,0,.25))}
    h1{margin:0;font-size:clamp(22px,3.2vw,34px);line-height:1.12}
    .sub{margin-top:6px;color:var(--muted);font-size:14.5px}
    .main{padding:10px 26px 26px}
    .question{margin:10px 0 18px;font-size:clamp(18px,2.5vw,22px);color:rgba(255,255,255,.9)}
    .btns{display:flex;gap:14px;flex-wrap:wrap;align-items:center;position:relative}
    button{border:0;padding:12px 18px;border-radius:999px;font-weight:800;cursor:pointer;transition:transform .12s ease,filter .12s ease;font-size:16px}
    button:active{transform:translateY(1px) scale(.99)}
    #yes{background:linear-gradient(135deg,var(--pink),var(--pink2));color:#fff;box-shadow:0 14px 30px rgba(255,77,141,.28)}
    #yes:hover{filter:brightness(1.05);transform:translateY(-1px)}
    #no{background:rgba(255,255,255,.14);color:rgba(255,255,255,.88);border:1px solid rgba(255,255,255,.20);box-shadow:0 12px 24px rgba(0,0,0,.25);position:relative}
    #no:hover{transform:translateY(-1px)}
    .result{display:none;margin-top:14px;text-align:center}
    .big{font-size:16px;color:rgba(255,255,255,.82);line-height:1.35}
    .fireGif{width:min(520px,88vw);border-radius:22px;border:1px solid rgba(255,255,255,.20);box-shadow:0 18px 60px rgba(0,0,0,.45);display:block;margin:4px auto 14px;opacity:0;transform:translateY(10px) scale(.98);filter:saturate(1.15) contrast(1.05)}
    .fireGif.show{animation:popgif .7s cubic-bezier(.2,.9,.2,1) forwards}
    @keyframes popgif{to{opacity:1;transform:translateY(0) scale(1)}}
    .small{margin-top:10px;font-size:13px;color:rgba(255,255,255,.65)}
    .typewriter{display:inline-block;border-right:2px solid rgba(255,255,255,.75);white-space:nowrap;overflow:hidden;animation:caret .9s steps(1) infinite}
    @keyframes caret{50%{border-color:transparent}}
    canvas{position:fixed;inset:0;pointer-events:none;opacity:0;transition:opacity .2s;z-index:9}
    canvas.show{opacity:1}
    @media (max-width:520px){
      .top{padding:20px 20px 6px}.main{padding:8px 20px 22px}
      .avatar{width:74px;height:74px;border-radius:20px}
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <canvas id="c"></canvas>

  <main class="wrap">
    <section class="card">
      <div class="top">
        <div class="avatar" aria-hidden="true"></div>
        <div>
          <h1>Kenayahâ€¦</h1>
          <div class="sub">jâ€™ai une question ultra importante ðŸ˜¤ðŸ’—</div>
        </div>
      </div>

      <div class="main">
        <p class="question">Tu veux Ãªtre <strong>ma copine</strong> ? ðŸ¥¹ðŸ‘‰ðŸ‘ˆ</p>

        <div class="btns" id="btns">
          <button id="yes">Oui ðŸ’–</button>
          <button id="no">Non ðŸ˜’</button>
        </div>

        <div class="result" id="result">
          <img id="fireGif" class="fireGif" alt="Feu dâ€™artifice" src="https://media.giphy.com/media/26tOZ42Mg6pbTUPHW/giphy.gif" />
          <h2 id="msg1"></h2>
          <div class="big" id="msg2"></div>
          <div class="small" id="joke"></div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const yesBtn = document.getElementById('yes');
    const noBtn  = document.getElementById('no');
    const btns   = document.getElementById('btns');
    const result = document.getElementById('result');

    // No button dodge
    function moveNo(){
      const r = btns.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 6;
      const maxX = Math.max(pad, r.width - b.width - pad);
      const maxY = 70;
      const x = pad + Math.random()*maxX;
      const y = (-10) + Math.random()*maxY;
      noBtn.style.position = 'absolute';
      noBtn.style.left = x + 'px';
      noBtn.style.top  = y + 'px';
    }
    noBtn.addEventListener('mouseenter', moveNo);
    noBtn.addEventListener('touchstart', (e)=>{ e.preventDefault(); moveNo(); }, {passive:false});
    noBtn.addEventListener('click', (e)=>{ e.preventDefault(); moveNo(); });

    // Typewriter
    function typeInto(el, text, speed=28){
      el.textContent = "";
      el.classList.add("typewriter");
      let i = 0;
      return new Promise((resolve)=>{
        const tick = () => {
          if (i <= text.length){
            el.textContent = text.slice(0, i);
            i++;
            setTimeout(tick, speed);
          } else {
            setTimeout(()=> el.classList.remove("typewriter"), 650);
            resolve();
          }
        };
        tick();
      });
    }

    // Confetti (simple)
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    function resize(){
      const dpr = devicePixelRatio || 1;
      canvas.width = innerWidth * dpr;
      canvas.height = innerHeight * dpr;
      canvas.style.width = innerWidth+'px';
      canvas.style.height = innerHeight+'px';
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    addEventListener('resize', resize); resize();

    let pieces = [];
    function burstConfetti(){
      canvas.classList.add('show');
      pieces = Array.from({length: 160}, ()=>({
        x: Math.random()*innerWidth,
        y: -20,
        vx: -2 + Math.random()*4,
        vy: 3 + Math.random()*4,
        r: Math.random()*Math.PI,
        vr: -0.12 + Math.random()*0.24,
        w: 6 + Math.random()*8,
        h: 8 + Math.random()*14,
        tone: Math.random(),
        life: 180 + Math.random()*120
      }));
      tick();
      setTimeout(()=> canvas.classList.remove('show'), 2400);
    }
    function draw(p){
      const hue = 320 + p.tone*60;
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.r);
      ctx.globalAlpha = Math.max(0, Math.min(1, p.life/240));
      ctx.fillStyle = `hsl(${hue}deg 90% 70% / 0.9)`;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
    }
    function tick(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(const p of pieces){
        p.x += p.vx; p.y += p.vy; p.r += p.vr; p.vy += 0.02; p.life -= 1;
        draw(p);
      }
      pieces = pieces.filter(p=>p.life>0 && p.y<innerHeight+60);
      if(pieces.length) requestAnimationFrame(tick);
    }

    // YES sequence
    const fireGif = document.getElementById('fireGif');
    const msg1 = document.getElementById('msg1');
    const msg2 = document.getElementById('msg2');
    const joke = document.getElementById('joke');

    async function playYes(){
      result.style.display = 'block';
      btns.style.display = 'none';

      fireGif.classList.remove('show');
      msg1.textContent = ""; msg2.textContent = ""; joke.textContent = "";

      burstConfetti();
      requestAnimationFrame(()=> fireGif.classList.add('show'));

      await typeInto(msg1, "Je savais que tâ€™aurais acceptÃ©, tâ€™es accro ðŸ˜ˆðŸ’˜", 26);
      await typeInto(msg2, "Je tâ€™aime odimba", 30);
      joke.textContent = "(ou pas)ðŸ¤£";

      yesBtn.disabled = true;
      noBtn.disabled = true;
    }

    yesBtn.addEventListener('click', ()=> playYes());
  </script>
</body>
</html>
